# TV取材用デモ版 要件と作業リスト

**作成日**: 2026-02-01
**目的**: テレビ東京取材対応用のデモ版作成

---

## 背景

ブログで公開した作業記録データベースについてテレビ東京から取材依頼。
実際のアプリには顧客情報が含まれるため、サンプルデータ/デモ版を作成して見せる。

---

## 機密情報の分類と対応方針

### 🔴 絶対NG（撮影不可）

| 項目 | 理由 | 対応 |
|------|------|------|
| **図面ファイル（PDF）** | 顧客の機密図面 | 削除 or ダミーPDFに差し替え |
| **会社名 + 図番 + 作業内容の紐付け** | 取引先特定につながる | マスキング必須 |
| **プログラムファイル（NC等）** | 加工ノウハウ流出 | 要検討（削除推奨） |

### 🟡 要注意（確認が必要）

| 項目 | 理由 | 対応 |
|------|------|------|
| **完成品の写真** | 製品特定の可能性 | 確認して判断 |
| **動画** | 完成品が映っている可能性 | 確認して判断 |

### 🟢 そのまま使用可能

| 項目 | 理由 |
|------|------|
| **加工中の画像・動画** | 製品特定困難 |
| **汎用的な作業手順テキスト** | 一般的なノウハウ |
| **UI/機能のデモ** | 問題なし |

---

## 既存マスキング機能の分析

### `npm run mask-data` でカバーされている項目

| 項目 | 対応状況 | 出力先 |
|------|----------|--------|
| 会社ID | ✅ マスク済 | `sample-works` 等に変換 |
| 会社名 | ✅ マスク済 | `サンプル製作所` 等に変換 |
| 図番 | ✅ マスク済 | `TEST-001-A` 形式に変換 |
| 製品名 | ✅ マスク済 | `テストパーツA` 等に変換 |
| ユーザー名 | ✅ マスク済 | `佐藤太郎` 等に変換 |
| システム名 | ✅ マスク済 | `サンプル工業AI` に変換 |

### 現状の問題点

| 項目 | 問題 | 必要な対応 |
|------|------|-----------|
| **PDFファイル** | そのままコピーされる | 削除 or ダミー差し替え |
| **プログラムファイル** | そのままコピーされる | 削除 or ダミー差し替え |
| **画像・動画** | そのままコピーされる | 完成品確認が必要 |
| **フォルダ名** | 図番がフォルダ名に残る | ✅ 既にマスク処理あり |

---

## 必要な作業リスト

### Phase 1: スクリプト改修（優先度：高）

- [ ] **1-1. PDF削除機能の追加**
  - `mask-data.js` に図面PDF削除オプション追加
  - または `pdfs/` フォルダをコピーしない設定

- [ ] **1-2. プログラムファイル削除機能の追加**
  - `programs/` フォルダをコピーしない設定
  - またはダミーファイルに差し替え

- [ ] **1-3. ダミーPDF生成（オプション）**
  - 「サンプル図面」と書かれたダミーPDFを配置
  - UI上でPDFアイコンが表示されるようにする

### Phase 2: メディアファイル確認（優先度：中）

- [ ] **2-1. 完成品画像の特定**
  - `images/` 内の完成品画像をリストアップ
  - 削除対象を決定

- [ ] **2-2. 完成品動画の特定**
  - `videos/` 内の完成品動画をリストアップ
  - 削除対象を決定

- [ ] **2-3. 対象ファイル除外処理**
  - 特定ファイルを除外するロジック追加

### Phase 3: デモ用データ準備（優先度：中）

- [ ] **3-1. 代表的な図番の選定**
  - デモで見せる図番を5〜10件程度選定
  - 作業手順が充実しているものを優先

- [ ] **3-2. サンプルデータの作成（オプション）**
  - 架空の作業手順データを作成
  - 完全にオリジナルのデモデータ

### Phase 4: 動作確認・デプロイ（優先度：低）

- [ ] **4-1. マスク済みデータでの動作確認**
  - `public/data_masked` を使って起動
  - 全機能が正常動作するか確認

- [ ] **4-2. デモ環境の構築**
  - ローカルで動かす？
  - 一時的にデプロイする？

---

## 技術メモ

### マスキング済みデータの使用方法

```bash
# マスキング実行
npm run mask-all

# マスク済みデータは public/data_masked に出力される

# 環境変数でデータパスを切り替え
DEV_DATA_ROOT_PATH=./public/data_masked
```

### 現在のフォルダ構造（出力先）

```
public/data_masked/
├── companies.json          # マスク済み
├── search-index.json       # マスク済み
└── work-instructions/
    └── drawing-TEST-XXX-X/
        ├── instruction.json   # マスク済み
        ├── contributions/     # マスク済み
        ├── images/            # 現状: そのままコピー
        ├── videos/            # 現状: そのままコピー
        ├── pdfs/              # ⚠️ 削除必要
        └── programs/          # ⚠️ 削除必要
```

---

## 確認事項（ユーザーへの質問）

1. **デモの見せ方**
   - ローカルで画面を見せる？
   - どこかにデプロイして触ってもらう？

2. **見せたい機能の優先度**
   - 図番検索機能
   - 階層ナビゲーション
   - 作業手順表示（機械種別タブ）
   - 追記機能
   - 管理画面
   - AIチャット機能

3. **メディアファイルの確認**
   - 手動で完成品画像を確認するか？
   - 一括で全画像を除外するか？

---

## 更新履歴

- 2026-02-01: 初版作成
