# 図面データ入力テンプレート使用説明書

## 概要

このテンプレートは、図面を追加する際に必要な情報を人間が入力しやすい形式で整理し、LLMによるJSON変換を容易にするために作成されました。

## 提供形式

### 1. Excelファイル形式
- **ファイル名**: `図面データ入力テンプレート.xlsx`
- **特徴**: 複数シートで構成され、視覚的に分かりやすい
- **推奨用途**: 初回使用時、複雑なデータ入力時

### 2. CSVファイル形式
- **ディレクトリ**: `csv_templates/`
- **特徴**: 9つのCSVファイルに分割され、プログラムでの処理が容易
- **推奨用途**: 大量データ処理、自動化時

## ファイル構成

### Excelファイル（10シート）
1. **基本情報（必須）** - 図面の基本情報
2. **検索・分類情報（必須）** - 検索用の分類情報
3. **作業手順概要** - 作業の概要説明
4. **作業ステップ** - 各作業ステップの詳細
5. **切削条件** - 切削条件の詳細
6. **品質チェック** - 品質チェック項目
7. **トラブルシューティング** - トラブル対処法
8. **関連情報** - 関連図面やアイデア
9. **改訂履歴** - 改訂履歴
10. **使用説明** - テンプレートの使用方法

### CSVファイル（9ファイル）
- `01_基本情報（必須）.csv`
- `02_検索・分類情報（必須）.csv`
- `03_作業手順概要.csv`
- `04_作業ステップ.csv`
- `05_切削条件.csv`
- `06_品質チェック.csv`
- `07_トラブルシューティング.csv`
- `08_関連情報.csv`
- `09_改訂履歴.csv`

## 必須項目と任意項目

### 必須項目
- **基本情報**: 図面番号、会社ID、会社名、会社短縮名、製品ID、製品名、製品カテゴリ、図面タイトル
- **検索・分類情報**: キーワード、難易度、推定時間、機械タイプ、画像有無、動画有無、図面有無
- **作業手順概要**: 作業説明、準備時間、加工時間、必要工具
- **作業ステップ**: ステップ番号、タイトル、説明、詳細手順、時間、警告レベル
- **切削条件**: ステップ番号、加工タイプ、工具、回転数、送り速度、切り込み量
- **品質チェック**: ステップ番号、チェック項目、測定工具

### 任意項目
- 警告事項（最大3つ）
- 画像ファイル、動画ファイル
- ステップオーバー、切削油
- 公差
- トラブルシューティング
- 関連情報
- 改訂履歴

## 入力方法

### 複数値の入力
- **カンマ区切り**: キーワード、必要工具、画像ファイルなど
  - 例: `ブラケット,チェーンソー,精密,加工,マシニング`
- **セミコロン区切り**: 詳細手順（複数行の手順）
  - 例: `材料寸法確認（300×200×50mm SS400）および外観検査を実施;マシニングセンタのバイスに材料をセット、ダイヤルゲージで水平出し確認`

### 選択肢のある項目
- **難易度**: 初級/中級/上級
- **警告レベル**: important/caution/critical
- **画像有無/動画有無/図面有無**: あり/なし

## 使用手順

### 1. テンプレートの準備
1. ExcelファイルまたはCSVファイルをコピー
2. 新しい図面用のファイル名に変更

### 2. データ入力
1. 必須項目を必ず入力
2. 任意項目は必要に応じて入力
3. 複数値は適切な区切り文字を使用

### 3. データ検証
1. 必須項目の入力漏れがないか確認
2. データ形式が正しいか確認
3. 文字化けがないか確認

### 4. JSON変換
1. 入力完了後、LLMにJSON変換を依頼
2. 変換結果を確認
3. 必要に応じて修正

## LLMへの依頼例

```
以下の図面データ入力テンプレートを、現在のJSONファイル形式に変換してください。

【変換対象】
- companies.json
- search-index.json  
- instruction.json

【入力データ】
[テンプレートの内容を貼り付け]

【注意事項】
- カンマ区切りの値は配列として変換
- セミコロン区切りの値は配列として変換
- 空欄はnullまたは空配列として処理
- 既存のJSONファイルの構造を維持
```

## 注意事項

### データ入力時
- 必須項目は必ず入力してください
- 文字化けを防ぐため、UTF-8エンコーディングを使用
- 特殊文字（改行、タブ等）の使用は避ける

### JSON変換時
- 既存のJSONファイルの構造を維持
- メタデータ（totalCompanies、totalProducts等）の更新を忘れずに
- ファイルパスやフォルダ名の整合性を確認

## トラブルシューティング

### よくある問題
1. **文字化け**: UTF-8エンコーディングで保存
2. **データ形式エラー**: 区切り文字の使用を確認
3. **必須項目漏れ**: 黄色ハイライト項目を確認
4. **JSON変換エラー**: データ形式の統一性を確認

### サポート
- 問題が発生した場合は、入力データとエラーメッセージを確認
- 必要に応じてテンプレートの修正版を提供

## 更新履歴

- **2024-12-30**: 初版作成
  - Excelテンプレート作成
  - CSVテンプレート作成
  - 使用説明書作成

## 関連ファイル

- `scripts/create_excel_template.py` - Excelテンプレート作成スクリプト
- `scripts/create_csv_template.py` - CSVテンプレート作成スクリプト
- `public/data/companies.json` - 会社情報JSON
- `public/data/search-index.json` - 検索インデックスJSON
- `public/data/work-instructions/` - 作業手順JSONディレクトリ 